/**
 * moduleSystem
 * Dynamic Loading of Javascript based on DOM elements
 * @version v1.0.0 - 2014-11-21 * @link 
 * @author Eder Alexander <eder.alexan@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */!function(a,b,c){function d(a,b){"use strict";var c,d,e,f=a.length;for(c=0;f>c&&(d=a[c],!(e=b(c,d)));c++);}function e(a,b){"use strict";var c,d,e=a.length,f=!1;for(c=0;e>c;c++)if(d=a[c],d===b){f=!0;break}return f}function f(){"use strict";function a(a){if(a!==c){var e="on"+a.name;d(i,function(d,f){a.name!==c&&b(f,e,a),b(f,h,a)})}}function b(a,b,c){var d=a[b];"function"==typeof d&&d.call(null,c)}function f(a){if(a===c)throw new Error("Component to be registered is undefined");if(e(i,a))throw new Error("Component is already registered");i.push(a)}function g(){i=[]}var h="onEvent",i=[];return{publish:a,add:f,reset:g}}var g=function(a,c){"use strict";function d(){function d(){var d,f,g=b.querySelectorAll("[modules]");for(d=0;d<g.length;d++)f=g[d],e(f);c.provisionFinished(),a.provisionFinished()}function e(b){a.provisionModule(b)}d()}return{initModulePage:d}},h=function(a,b){"use strict";function c(a){return function(b){function c(c){var d={creator:c,name:b,dependencies:g,settings:f};a(d)}function d(a){return f=a,{dependencies:e,creator:c}}function e(a){return g=a,{settings:d,creator:c}}if("string"!=typeof b)throw new Error("Name missing");var f,g=[];return{settings:d,dependencies:e,creator:c}}}return{createPart:c(b.addPartDescriptor),createModule:c(a.addModuleDescriptor)}},i=function(){"use strict";function a(a){j[a.name]=a}function b(a){var b,c,e=[];for(b=0;b<a.length;b++)c=a[b],e.push(d(c));return e}function d(a){var b=i[a];return b===c&&(b=e(a)),b}function e(a){var c,d,e;if(j.hasOwnProperty(a))return e=j[a],c=e.dependencies,d=b(c),f(e,d);throw new Error("tried to load "+a+"but was not registered")}function f(a,b){var d,e;return d=b,a.settings!==c&&d.unshift(a.settings),e=a.creator.apply(null,d),e===c&&(e={}),i[a.name]=e,e}function g(){function a(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(c=a[b],"function"==typeof c.postConstruct&&c.postConstruct())}a(i)}function h(){i={},j={}}var i={},j={};return{reset:h,provisionPart:d,getParts:b,provisionFinished:g,addPartDescriptor:a}},j=function(a,b){"use strict";function d(a){m[a.name]=a}function e(a){var b,c,d=a.getAttribute("modules"),e=d.split(",");for(b=0;b<e.length;b++)c=e[b].trim(),f(a,c)}function f(b,c){var d,e;if(!m.hasOwnProperty(c))throw new Error("Module "+c+" not registered but found in dom");if(d=m[c],e=a.getParts(d.dependencies),e.length!==d.dependencies.length)throw new Error("Required Parts Missing from "+c+" dependencies: "+JSON.stringify(d.dependencies));g(b,d,e)}function g(a,d,e){var f,g,i,k=e,m=h(a,d.name);(d.settings!==c||m!==c)&&(f=j({},d.settings,m),k.unshift(f)),k.unshift(a),g=d.creator.apply(null,k),g===c&&(g={}),l[i]=g,b.add(g)}function h(a,b){var c,d,e=a.querySelector('script[type="'+b+'/settings"]');return null!==e&&(c=e.innerHTML,d=JSON.parse(c)),d}function i(){function a(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(c=a[b],"function"==typeof c.postConstruct&&c.postConstruct())}a(l)}function j(){var a,b;for(a=1;a<arguments.length;a++)for(b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}function k(){l={},m={}}var l={},m={};return{reset:k,provisionModule:e,provisionFinished:i,addModuleDescriptor:d}};moduleSystem=function(a,b,c,d,e){"use strict";function f(){g.reset(),i.reset(),h.reset(),j.createPart("eventBus").creator(function(){return h})}var g=c(),h=e(),i=d(g,h),j=a(i,g),k=b(i,g);return j.createPart("eventBus").creator(function(){return h}),{createPart:j.createPart,createModule:j.createModule,initModulePage:k.initModulePage,reset:f,getPart:g.provisionPart}}(h,g,i,j,f)}(window,document);