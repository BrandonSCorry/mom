/**
 * moduleSystem
 * Dynamic Loading of Javascript based on DOM elements
 * @version v1.1.0 - 2014-11-21 * @link 
 * @author Eder Alexander <eder.alexan@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */!function(a,b,c){function d(a,b){"use strict";var c,d,e,f=a.length;for(c=0;f>c&&(d=a[c],!(e=b(c,d)));c++);}function e(a,b){"use strict";var c,d,e=a.length,f=!1;for(c=0;e>c;c++)if(d=a[c],d===b){f=!0;break}return f}function f(){"use strict";function a(a){if(a!==c){var e="on"+a.name;d(i,function(d,f){a.name!==c&&b(f,e,a),b(f,h,a)})}}function b(a,b,c){var d=a[b];"function"==typeof d&&d.call(null,c)}function f(a){if(a===c)throw new Error("Component to be registered is undefined");if(e(i,a))throw new Error("Component is already registered");i.push(a)}function g(){i=[]}var h="onEvent",i=[];return{publish:a,add:f,reset:g}}var g=function(a,c){"use strict";function e(){function e(){var e=b.querySelectorAll("[modules]");d(e,function(a,b){f(b)}),c.provisionFinished(),a.provisionFinished()}function f(b){a.provisionModule(b)}e()}return{initModulePage:e}},h=function(a,b){"use strict";function c(a){return function(b){function c(c){var d={creator:c,name:b,dependencies:g,settings:f};a(d)}function d(a){return f=a,{dependencies:e,creator:c}}function e(a){return g=a,{settings:d,creator:c}}if("string"!=typeof b)throw new Error("Name missing");var f,g=[];return{settings:d,dependencies:e,creator:c}}}return{createPart:c(b.addPartDescriptor),createModule:c(a.addModuleDescriptor)}},i=function(){"use strict";function a(a){k[a.name]=a}function b(a){var b=[];return d(a,function(a,c){b.push(e(c))}),b}function e(a){var b=j[a];return b===c&&(b=f(a)),b}function f(a){var c,d,e;if(k.hasOwnProperty(a))return e=k[a],c=e.dependencies,d=b(c),g(e,d);throw new Error("tried to load "+a+"but was not registered")}function g(a,b){var d,e;return d=b,a.settings!==c&&d.unshift(a.settings),e=a.creator.apply(null,d),e===c&&(e={}),j[a.name]=e,e}function h(){function a(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(c=a[b],"function"==typeof c.postConstruct&&c.postConstruct())}a(j)}function i(){j={},k={}}var j={},k={};return{reset:i,provisionPart:e,getParts:b,provisionFinished:h,addPartDescriptor:a}},j=function(a,b){"use strict";function e(a){n[a.name]=a}function f(a){var b=a.getAttribute("modules"),c=b.split(",");d(c,function(b,c){c=c.trim(),g(a,c)})}function g(b,c){var d,e;if(!n.hasOwnProperty(c))throw new Error("Module "+c+" not registered but found in dom");if(d=n[c],e=a.getParts(d.dependencies),e.length!==d.dependencies.length)throw new Error("Required Parts Missing from "+c+" dependencies: "+JSON.stringify(d.dependencies));h(b,d,e)}function h(a,d,e){var f,g,h,j=e,l=i(a,d.name);(d.settings!==c||l!==c)&&(f=k({},d.settings,l),j.unshift(f)),j.unshift(a),g=d.creator.apply(null,j),g===c&&(g={}),m[h]=g,b.add(g)}function i(a,b){var c,d,e=a.querySelector('script[type="'+b+'/settings"]');return null!==e&&(c=e.innerHTML,d=JSON.parse(c)),d}function j(){function a(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(c=a[b],"function"==typeof c.postConstruct&&c.postConstruct())}a(m)}function k(){var a,b;for(a=1;a<arguments.length;a++)for(b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}function l(){m={},n={}}var m={},n={};return{reset:l,provisionModule:f,provisionFinished:j,addModuleDescriptor:e}};moduleSystem=function(a,b,c,d,e){"use strict";function f(){g.reset(),i.reset(),h.reset(),j.createPart("eventBus").creator(function(){return h})}var g=c(),h=e(),i=d(g,h),j=a(i,g),k=b(i,g);return j.createPart("eventBus").creator(function(){return h}),{createPart:j.createPart,createModule:j.createModule,initModulePage:k.initModulePage,reset:f,getPart:g.provisionPart}}(h,g,i,j,f)}(window,document);